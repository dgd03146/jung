# yaml-language-server: $schema=https://coderabbit.ai/integrations/schema.v2.json
language: "ko-KR"
early_access: false

# 250ì ì œí•œ: í•µì‹¬ ì›ì¹™ + ë°˜ë³µ ì½”ë©˜íŠ¸ ë°©ì§€ ì§€ì‹œ
tone_instructions: >
  Tossê¸‰ ì•„í‚¤í…ì²˜ ì „ë¬¸ê°€. Readability/Predictability/Cohesion/Low Coupling.
  React 19, TS 5, TanStack Query v5, FSD, Vanilla Extract.
  ë™ì¼ ì´ìŠˆê°€ ì—¬ëŸ¬ íŒŒì¼ì— ë°˜ë³µë˜ë©´ ëŒ€í‘œ 1ê³³ë§Œ ì½”ë©˜íŠ¸í•˜ê³  ë‚˜ë¨¸ì§€ëŠ” ìš”ì•½ìœ¼ë¡œ ë¬¶ì–´ë¼.

reviews:
  profile: "assertive"
  request_changes_workflow: true
  high_level_summary: true
  high_level_summary_in_walkthrough: true
  poem: false
  review_status: true
  collapse_walkthrough: true
  sequence_diagrams: true
  changed_files_summary: true
  assess_linked_issues: true
  related_issues: true
  related_prs: true
  abort_on_close: true

  # ë¼ë²¨ ìë™ ì œì•ˆ
  suggested_labels: true
  auto_apply_labels: false
  labeling_instructions:
    - label: "bug"
      instructions: "PRì´ ê¸°ì¡´ ë™ì‘ì˜ ë²„ê·¸ë¥¼ ìˆ˜ì •í•  ë•Œ"
    - label: "refactor"
      instructions: "ê¸°ëŠ¥ ë³€ê²½ ì—†ì´ ì½”ë“œ êµ¬ì¡°ë¥¼ ê°œì„ í•  ë•Œ"
    - label: "feature"
      instructions: "ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì¶”ê°€í•  ë•Œ"
    - label: "design-system"
      instructions: "packages/design-system ë³€ê²½ì´ í¬í•¨ë  ë•Œ"
    - label: "admin"
      instructions: "apps/admin ë³€ê²½ì´ í¬í•¨ë  ë•Œ"
    - label: "web"
      instructions: "apps/web ë³€ê²½ì´ í¬í•¨ë  ë•Œ"

  # ìë™ ë¦¬ë·° ì„¤ì •
  auto_review:
    enabled: true
    auto_incremental_review: true
    auto_pause_after_reviewed_commits: 5
    drafts: false
    base_branches: ["main", "dev", "release"]
    ignore_title_keywords:
      - "wip"
      - "draft"
      - "[skip ci]"
      - "[ci skip]"
      - "[skip review]"

  # ë¹Œë“œ ì‚°ì¶œë¬¼, ìƒì„± ì½”ë“œ, ë¬¸ì„œ ì œì™¸
  path_filters:
    - "!**/node_modules/**"
    - "!**/dist/**"
    - "!**/.next/**"
    - "!**/build/**"
    - "!**/coverage/**"
    - "!**/.turbo/**"
    - "!**/storybook-static/**"
    - "!**/*.gen.ts"
    - "!**/routeTree.gen.ts"
    - "!**/pnpm-lock.yaml"
    - "!**/*.lock"
    - "!docs/**"
    - "!**/*.md"
    - "!**/*.mdx"
    - "!**/public/**"
    - "!**/.env.example"
    - "!**/*.svg"

  # Finishing touches (docstring/test ì œì•ˆ)
  finishing_touches:
    docstrings:
      enabled: false
    unit_tests:
      enabled: false

  # Pre-merge í’ˆì§ˆ ê²Œì´íŠ¸
  pre_merge_checks:
    title:
      mode: "warning"
      requirements: "Conventional Commits í˜•ì‹: type(scope): description"
    description:
      mode: "warning"

  # ============================================
  # ğŸ“‹ Path Instructions
  # ============================================
  path_instructions:

    # ------------------------------------------
    # ğŸ” Global: Readability + Effect Hygiene
    # ------------------------------------------
    - path: "**/*.{ts,tsx}"
      instructions: |
        ğŸ” Readability:
        - Magic numbers â†’ Named constants
        - ë³µì¡í•œ ì¡°ê±´ â†’ ëª…ëª…ëœ ë³€ìˆ˜ (isEligible, canSubmit)
        - ì¤‘ì²© ì‚¼í•­ ê¸ˆì§€ â†’ switch/IIFE/early return
        - ë™ì¼ íŒ¨í„´ì´ ì—¬ëŸ¬ íŒŒì¼ì— ë°˜ë³µë˜ë©´ ëŒ€í‘œ 1ê³³ë§Œ ì½”ë©˜íŠ¸

        âš¡ useEffect = ì™¸ë¶€ ì‹œìŠ¤í…œ ë™ê¸°í™”ë§Œ (react.dev):
        âœ… íƒ€ì´ë¨¸, êµ¬ë…(WebSocket), ë¹„-React ìœ„ì ¯, ë¸Œë¼ìš°ì € API
        âŒ ë°ì´í„° í˜ì¹­ â†’ TanStack Query, íŒŒìƒ ìƒíƒœ â†’ ë Œë” ì‹œ ê³„ì‚°

        ğŸ›¡ï¸ TypeScript: any ê¸ˆì§€, unknown+íƒ€ì…ê°€ë“œ, Discriminated Union

        â™¿ Accessibility: ë„¤ì´í‹°ë¸Œ ìš”ì†Œ ìš°ì„  (<button>), ARIA ë³´ì¡°, í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜

    # ------------------------------------------
    # ğŸ¨ Vanilla Extract (.css.ts)
    # ------------------------------------------
    - path: "**/*.css.ts"
      instructions: |
        ğŸ¨ Vanilla Extract:
        - ë””ìì¸ í† í°: palette(design-system), tokens.ts(fsd/shared/styles) í™œìš©
        - í•˜ë“œì½”ë”© rgba/hex ê¸ˆì§€ â†’ ê³µìœ  í† í° import
          import { border, primaryRing, hoverBg } from '@/fsd/shared/styles/tokens';
        - transitionì€ ë°˜ë“œì‹œ base ìŠ¤íƒ€ì¼ì— (hover-out ì• ë‹ˆë©”ì´ì…˜ ë³´ì¥)
        - Recipesë¡œ variant, camelCase ë„¤ì´ë°
        - ì¸ë¼ì¸ ìŠ¤íƒ€ì¼ ê¸ˆì§€

    # ------------------------------------------
    # ğŸ¯ Hooks: TanStack Query v5
    # ------------------------------------------
    - path: "**/{hooks,api,model}/**/*.{ts,tsx}"
      instructions: |
        ğŸ¯ TanStack Query v5 + TkDodo:
        - Query hooks â†’ ì „ì²´ QueryResult<T, Error> ë°˜í™˜ (dataë§Œ êº¼ë‚´ì§€ ë§ ê²ƒ)
        - queryKeyì— ëª¨ë“  íŒŒë¼ë¯¸í„° í¬í•¨
        - queryOptions() í—¬í¼ë¡œ ì˜µì…˜ ê³µí†µí™”
        - enabledë¡œ ì¡°ê±´ë¶€ ì¿¼ë¦¬
        - ë‚™ê´€ì  ì—…ë°ì´íŠ¸: onMutateâ†’onErrorâ†’onSettled 3ë‹¨ê³„
        - gcTime (v5, cacheTime ì•„ë‹˜)

    # ------------------------------------------
    # ğŸ§© FSD: Web App
    # ------------------------------------------
    - path: "apps/web/src/features/**/*.{ts,tsx}"
      instructions: |
        ğŸ§© FSD features (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§):
        - api/: TanStack Query hooks, model/: ë¹„ì¦ˆë‹ˆìŠ¤ hooks, ui/: ì»´í¬ë„ŒíŠ¸
        - ë‹¨ë°©í–¥: features â†’ entities â†’ shared
        - SRP, Form cohesion

    - path: "apps/web/src/entities/**/*.{ts,tsx}"
      instructions: |
        ğŸ§© FSD entities (ìˆœìˆ˜ ë°ì´í„°):
        - api/: Query hooks, ui/: Stateless, model/: íƒ€ì…/ìƒìˆ˜
        - âŒ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, features ì˜ì¡´, any

    - path: "apps/web/src/shared/**/*.{ts,tsx}"
      instructions: |
        ğŸ§© Shared (ë²”ìš©, ë„ë©”ì¸ ë¡œì§ ê¸ˆì§€):
        - ui/: Polymorphic ì»´í¬ë„ŒíŠ¸, hooks/: ì œë„¤ë¦­, lib/: ìˆœìˆ˜ í•¨ìˆ˜, api/: tRPC

    - path: "apps/web/src/views/**/*.{ts,tsx}"
      instructions: |
        ğŸ­ Views: Compositionìœ¼ë¡œ features ì¡°í•©. âŒ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§/ë°ì´í„° í˜ì¹­. âœ… ë ˆì´ì•„ì›ƒ, SEOë§Œ.

    - path: "apps/web/src/widgets/**/*.{ts,tsx}"
      instructions: |
        ğŸ­ Widgets: ë…ë¦½ UI ë¸”ë¡ (Header, Sidebar). features ì¡°í•© ê°€ëŠ¥, ìì²´ ìƒíƒœ ê°€ëŠ¥.

    # ------------------------------------------
    # ğŸ“± FSD: Admin App
    # ------------------------------------------
    - path: "apps/admin/src/features/**/*.{ts,tsx}"
      instructions: |
        ğŸ“± Admin FSD features:
        - CRUD: TanStack Table + í•„í„°/ì •ë ¬/í˜ì´ì§€ë„¤ì´ì…˜
        - í¼: React Hook Form + Zod
        - ì‚­ì œ: í™•ì¸ Dialog (useConfirmDialog) + ë‚™ê´€ì  ì—…ë°ì´íŠ¸
        - columnHelperë¡œ íƒ€ì… ì•ˆì „
        - ê³µìœ  í† í°: @/fsd/shared/styles/tokens ì‚¬ìš© í•„ìˆ˜
        - ë‹¨ë°©í–¥: features â†’ entities â†’ shared

    - path: "apps/admin/src/entities/**/*.{ts,tsx}"
      instructions: |
        ğŸ“± Admin entities: ìˆœìˆ˜ ë°ì´í„° ë ˆì´ì–´. âŒ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, features ì˜ì¡´.

    - path: "apps/admin/src/shared/**/*.{ts,tsx}"
      instructions: |
        ğŸ“± Admin shared:
        - ui/: Table, FilterBar, BulkActionBar, EmptyState, CategoryManager
        - styles/tokens.ts: ê³µìœ  ë””ìì¸ í† í° (border, primaryRing, hoverBg ë“±)
        - styles/layout.ts: SIDEBAR_WIDTH ë“± ë ˆì´ì•„ì›ƒ ìƒìˆ˜
        - lib/: useBulkSelection, useConfirmDialog ë“± ê³µìœ  hooks
        - âŒ ë„ë©”ì¸ ë¡œì§

    - path: "apps/admin/src/views/**/*.{ts,tsx}"
      instructions: |
        ğŸ“± Admin views: í˜ì´ì§€ ì¡°í•©. âŒ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§. âœ… ë ˆì´ì•„ì›ƒë§Œ.

    - path: "apps/admin/src/widgets/**/*.{ts,tsx}"
      instructions: |
        ğŸ“± Admin widgets: Layout, Header, Sidebar, Dashboard, Analytics.

    # ------------------------------------------
    # ğŸ”— Coupling (ì „ì²´ ì•±)
    # ------------------------------------------
    - path: "apps/*/src/**/*.{ts,tsx}"
      instructions: |
        ğŸ”— Low Coupling:
        - Props drilling ê¸ˆì§€ â†’ Composition
        - ì¡°ê¸° ì¶”ìƒí™” ë°©ì§€ (3ê°œ ì´ìƒ íŒ¨í„´ì¼ ë•Œë§Œ)
        - ìƒíƒœ ê´€ë¦¬ ë²”ìœ„ ì¢ê²Œ (useCardIdParam > useGlobalState)

    # ------------------------------------------
    # ğŸ“¦ Design System
    # ------------------------------------------
    - path: "packages/design-system/**/*.{ts,tsx}"
      instructions: |
        ğŸ“¦ Design System:
        - Polymorphic (as prop), Compound Pattern
        - ì ‘ê·¼ì„± í•„ìˆ˜, 'use client' directive
        - Storybook ë¬¸ì„œí™”

    # ------------------------------------------
    # ğŸ” Backend
    # ------------------------------------------
    - path: "apps/server/**/*.ts"
      instructions: |
        ğŸ” tRPC + Zod:
        - Zod ì…ë ¥ ê²€ì¦ í•„ìˆ˜, TRPCError ì—ëŸ¬ ì²˜ë¦¬
        - íŠ¸ëœì­ì…˜ (ì—¬ëŸ¬ DB ì‘ì—… ì‹œ)
        - ì—ëŸ¬ ë©”ì‹œì§€ì— ë¯¼ê° ì •ë³´ ë…¸ì¶œ ê¸ˆì§€

    # ------------------------------------------
    # ğŸ”„ Shared Packages
    # ------------------------------------------
    - path: "packages/shared/**/*.ts"
      instructions: |
        ğŸ”„ Shared: types/(Result<T>, Discriminated Union), Zod ìŠ¤í‚¤ë§ˆ, ìˆœìˆ˜ í•¨ìˆ˜. âŒ any

    # ------------------------------------------
    # ğŸ§ª Testing
    # ------------------------------------------
    - path: "**/*.test.{ts,tsx}"
      instructions: |
        ğŸ§ª Unit Test: ì„¤ëª…ì  í…ŒìŠ¤íŠ¸ëª…, AAA íŒ¨í„´ (Arrange/Act/Assert), Edge case, Mock ìµœì†Œí™”

    - path: "**/*.spec.{ts,tsx}"
      instructions: |
        ğŸ§ª E2E: ì‚¬ìš©ì ê´€ì , Accessibility, waitFor ë„¤íŠ¸ì›Œí¬ ëŒ€ê¸°

# ============================================
# ğŸ› ï¸ Tools
# ============================================
tools:
  biome:
    enabled: true
  gitleaks:
    enabled: true

# ============================================
# ğŸ“š Knowledge Base
# ============================================
knowledge_base:
  web_search:
    enabled: true
  code_guidelines:
    enabled: true
    filePatterns:
      - "**/CLAUDE.md"
      - "**/rules/*.md"
      - "**/.cursorrules"
  learnings:
    scope: "auto"
  issues:
    scope: "auto"
  pull_requests:
    scope: "auto"

# ============================================
# ğŸ’¬ Chat
# ============================================
chat:
  auto_reply: true
